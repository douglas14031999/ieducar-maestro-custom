import{_ as L,X as S,G as F,a as T,b as f,l as v,c as P,p as A,r as X,g as q}from"./common.wmfdqs9ndo.js";import{d as z,r as x,_ as B,L as y,o as r,c as t,a as o,p as i,m as R,j as w,F as V,l as k,s as N,t as b}from"./vendor.wmfdqs9ndo.js";const $=z({components:{XBtn:L,XField:S,XForm:F()},setup(){const a=T(),e=x({allowPreregistrationDataUpdate:a.features.allowPreregistrationDataUpdate,allowExternalSystemDataUpdate:a.features.allowExternalSystemDataUpdate,allowTransferRegistration:a.features.allowTransferRegistration,transferDescription:a.features.transferDescription,allowVacancyCertificate:a.features.allowVacancyCertificate}),u=x(!1),p=x({name:void 0,waitingListLimit:1,processes:[]}),{loader:m,data:C}=f([]),{loader:n}=f(),{loader:g}=f(),{loader:c,data:s}=f([]);return m(v),c(()=>P()),{config:e,processes:s,groupers:C,grouper:p,loadingConfig:u,destroy:d=>{g(()=>X(d)).finally(()=>m(v))},submit:(d,{resetForm:U})=>{n(()=>A({name:d.name,waitingListLimit:Number(d.waitingListLimit),processes:d.processes})).finally(()=>m(v)),p.value.name=void 0,p.value.waitingListLimit=1,U()},saveConfig:()=>{u.value=!0,q({query:`
          mutation saveConfig($input: [ConfigInput!]!) {
            saveConfig(
              input: $input
            )
          }
        `,variables:{input:[{key:"allow_preregistration_data_update",value:e.value.allowPreregistrationDataUpdate?"true":"false"},{key:"allow_external_system_data_update",value:e.value.allowExternalSystemDataUpdate?"true":"false"},{key:"allow_transfer_registration",value:e.value.allowTransferRegistration?"true":"false"},{key:"transfer_description",value:e.value.transferDescription},{key:"allow_vacancy_certificate",value:e.value.allowVacancyCertificate?"true":"false"}]}}).then(()=>{a.features.allowPreregistrationDataUpdate=e.value.allowPreregistrationDataUpdate,a.features.allowExternalSystemDataUpdate=e.value.allowExternalSystemDataUpdate,a.features.allowTransferRegistration=e.value.allowTransferRegistration,a.features.transferDescription=e.value.transferDescription,a.features.allowVacancyCertificate=e.value.allowVacancyCertificate}).catch(d=>console.log(d)).finally(()=>{u.value=!1})}}}}),j={class:"container",style:{"max-width":"740px"}},O={key:0},H={key:1},K={key:0},Q={key:1},G={key:0},I={key:1},M={class:"table table-responsive table-striped table-vcenter"},J={key:0},W={style:{"vertical-align":"middle"}},Y={class:"small text-muted"},Z={key:0,class:"small text-muted"},h={key:1,class:"small text-muted"},_={class:"small text-muted"},ee={key:0},ae={class:"text-right"};function oe(a,e,u,p,m,C){const n=y("x-field"),g=y("x-btn"),c=y("x-form");return r(),t("main",j,[e[14]||(e[14]=o("h1",null,"Configura\xE7\xF5es",-1)),e[15]||(e[15]=o("p",null," Aqui voc\xEA poder\xE1 parametrizar o sistema para ativar ou desativar certas funcionalidades assim como configur\xE1-las. ",-1)),e[16]||(e[16]=o("hr",null,null,-1)),e[17]||(e[17]=o("h2",{class:"font-muli-20-primary"},"Edi\xE7\xE3o de dados",-1)),e[18]||(e[18]=o("p",null," Define se ser\xE1 poss\xEDvel modificar uma inscri\xE7\xE3o e/ou atualizar dados dos alunos. ",-1)),i(n,{modelValue:a.config.allowPreregistrationDataUpdate,"onUpdate:modelValue":e[0]||(e[0]=s=>a.config.allowPreregistrationDataUpdate=s),name:"allowPreregistrationDataUpdate","container-class":"form-group",type:"CHECKBOX",label:"Permitir a edi\xE7\xE3o das inscri\xE7\xF5es",description:"Quando marcado ir\xE1 permitir que usu\xE1rios editem a inscri\xE7\xE3o"},null,8,["modelValue"]),i(n,{modelValue:a.config.allowExternalSystemDataUpdate,"onUpdate:modelValue":e[1]||(e[1]=s=>a.config.allowExternalSystemDataUpdate=s),name:"allowExternalSystemDataUpdate","container-class":"form-group",type:"CHECKBOX",label:"Permitir a atualiza\xE7\xE3o dos dados no momento do deferimento",description:"Quando marcado ir\xE1 permitir que usu\xE1rios atualizem os dados no cadastro geral do aluno"},null,8,["modelValue"]),o("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...s)=>a.saveConfig&&a.saveConfig(...s))},[a.loadingConfig?(r(),t("span",O," Salvando.. ")):(r(),t("span",H," Salvar atualiza\xE7\xF5es "))]),e[19]||(e[19]=o("hr",null,null,-1)),e[20]||(e[20]=o("h2",{class:"font-muli-20-primary"},"Transfer\xEAncia",-1)),e[21]||(e[21]=o("p",null," Define se uma aluno ser\xE1 transferido caso j\xE1 exista uma matr\xEDcula ativa para o ano letivo. ",-1)),i(n,{modelValue:a.config.allowTransferRegistration,"onUpdate:modelValue":e[3]||(e[3]=s=>a.config.allowTransferRegistration=s),name:"allowTransferRegistration","container-class":"form-group",type:"CHECKBOX",label:"Fazer transfer\xEAncia ao deferir",description:"Quando marcado ir\xE1 transferir o aluno de escola se j\xE1 houver uma matr\xEDcula ativa"},null,8,["modelValue"]),a.config.allowTransferRegistration?(r(),R(n,{key:0,modelValue:a.config.transferDescription,"onUpdate:modelValue":e[4]||(e[4]=s=>a.config.transferDescription=s),name:"transferDescription","container-class":"form-group",type:"TEXT",label:"Tipo de transfer\xEAncia",description:"Descri\xE7\xE3o do tipo de transfer\xEAncia que ser\xE1 registrada",errors:!a.config.transferDescription},null,8,["modelValue","errors"])):w("",!0),o("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...s)=>a.saveConfig&&a.saveConfig(...s))},[a.loadingConfig?(r(),t("span",K," Salvando.. ")):(r(),t("span",Q," Salvar atualiza\xE7\xF5es "))]),e[22]||(e[22]=o("hr",null,null,-1)),e[23]||(e[23]=o("h2",{class:"font-muli-20-primary"},"Atestado de Vaga",-1)),e[24]||(e[24]=o("p",null,' Define se ser\xE1 poss\xEDvel emitir atestado de vaga para inscri\xE7\xF5es com status "Deferido" e "Em convoca\xE7\xE3o". ',-1)),i(n,{modelValue:a.config.allowVacancyCertificate,"onUpdate:modelValue":e[6]||(e[6]=s=>a.config.allowVacancyCertificate=s),name:"allowVacancyCertificate","container-class":"form-group",type:"CHECKBOX",label:"Permitir emiss\xE3o de atestado de vaga",description:"Quando marcado ir\xE1 permitir a emiss\xE3o de atestado de vaga para inscri\xE7\xF5es deferidas ou em convoca\xE7\xE3o"},null,8,["modelValue"]),o("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...s)=>a.saveConfig&&a.saveConfig(...s))},[a.loadingConfig?(r(),t("span",G," Salvando.. ")):(r(),t("span",I," Salvar atualiza\xE7\xF5es "))]),e[25]||(e[25]=o("hr",null,null,-1)),e[26]||(e[26]=o("h2",{class:"font-muli-20-primary"},"Agrupadores de processos",-1)),e[27]||(e[27]=o("p",null," O agrupador de processos permite que restri\xE7\xF5es espec\xEDficas sejam aplicadas a diversos processos possibilitando o compartilhamento de parametriza\xE7\xF5es entre eles. ",-1)),o("table",M,[e[12]||(e[12]=o("thead",null,[o("tr",null,[o("th",null,"Nome"),o("th")])],-1)),o("tbody",null,[a.groupers.length===0?(r(),t("tr",J,e[11]||(e[11]=[o("td",{colspan:"2"},"Nenhum agrupador de processos encontrado.",-1)]))):w("",!0),(r(!0),t(V,null,k(a.groupers,(s,l)=>(r(),t("tr",{key:l},[o("td",W,[o("div",null,b(s.name),1),o("div",Y,"Limite de inscri\xE7\xF5es em lista de espera: "+b(s.waitingListLimit),1),s.processes.length?(r(),t("div",Z,"Processos deste grupo:")):(r(),t("div",h,"N\xE3o h\xE1 processos neste grupo")),o("div",_,[s.processes.length?(r(),t("ul",ee,[(r(!0),t(V,null,k(s.processes,(E,D)=>(r(),t("li",{key:D},b(E.name),1))),128))])):w("",!0)])]),o("td",ae,[i(g,{"data-test":"btn-reject-in-batch",class:"mr-2 border-rejected text-rejected",label:"Excluir","no-caps":"","no-wrap":"",size:"sm",onClick:E=>a.destroy({id:s.id})},null,8,["onClick"])])]))),128))])]),e[28]||(e[28]=o("h3",null,"Adicionar novo agrupador",-1)),i(c,{onSubmit:a.submit},{default:N(s=>[i(n,{modelValue:a.grouper.name,"onUpdate:modelValue":e[8]||(e[8]=l=>a.grouper.name=l),name:"name",label:"Nome do Agrupador de Processos",type:"TEXT",rules:"required",errors:!!s.errors.name,"container-class":"col-12"},null,8,["modelValue","errors"]),i(n,{modelValue:a.grouper.waitingListLimit,"onUpdate:modelValue":e[9]||(e[9]=l=>a.grouper.waitingListLimit=l),name:"waitingListLimit",label:"Limite de inscri\xE7\xF5es em lista de espera",description:"Ser\xE1 o limite de inscri\xE7\xF5es compartilhada entre todos os processos",type:"NUMBER",rules:"required",errors:!!s.errors.waitingListLimit,"container-class":"col-12"},null,8,["modelValue","errors"]),i(n,{modelValue:a.grouper.processes,"onUpdate:modelValue":e[10]||(e[10]=l=>a.grouper.processes=l),name:"processes",label:"Processos",description:"Selecione os processos que ser\xE3o agrupados",type:"MULTISELECT",options:a.processes.map(l=>({label:l.name,value:l.id})),errors:!!s.errors.processes,"container-class":"col-12"},null,8,["modelValue","options","errors"]),e[13]||(e[13]=o("div",{class:"col-6"},[o("button",{type:"submit",class:"btn btn-block btn-primary"}," Adicionar ")],-1))]),_:1,__:[13]},8,["onSubmit"])])}const te=B($,[["render",oe]]);export{te as default};
